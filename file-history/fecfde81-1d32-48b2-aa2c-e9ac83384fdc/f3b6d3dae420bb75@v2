---
namespace: epks
document:
  enabled: true
  name: epks-documentation-index
  tags: [dokumentace, epks, rozcestník, index]
  version: v1.0.0
  created: 2025-09-29
---

# EPKS - Dokumentační rozcestník

Vítejte v dokumentaci projektu **EPKS** (Elektronická přihláška ke stravování).

## 📚 Základní dokumenty

- [[readme]] - Přehled projektu, struktura, základní informace
- [[epks.namespace]] - Definice namespace a nastavení projektu
- [[epks.package]] - Definice balíčku a závislostí

## 🏗️ Architektura a struktura

### Komponenty
Pro seznam všech komponent použijte:
```bash
fd -I "component\.md$"
```

**Kategorie komponent:**
- **Administrační komponenty** - správa přihlášek, detail odpovědí, tisk
  - [[epks.admin-response-detail]] - Detail jedné přihlášky
  - [[epks.admin-responses-table]] - Tabulka všech přihlášek
  - [[epks.admin-settings]] - Nastavení formuláře
  - [[epks.admin-print]] - Komponenta pro tisk

- **Formulářové komponenty** - hlavní formulář a jeho části
  - [[epks-main-form]] - Hlavní formulář přihlášky

- **Interní administrace** - centrální správa jídelen
  - [[canteens-admin]] - Správa jídelen
  - [[canteens-superadmin]] - Superadmin správa
  - [[epks.forms-admin]] - Správa formulářů
  - [[epks.internal-canteen-responses]] - Přehled odpovědí

- **Základní komponenty**
  - [[base-dialog]] - Základní dialogové okno
  - [[client-status]] - Status připojení klientů
  - [[epks-base-page]] - Základní stránka EPKS

### Stránky
- [[epks-form]] - Hlavní formulář přihlášky (veřejná stránka)
- [[epks-admin]] - Administrace jídelny
- [[epks-interni-administrace]] - Centrální administrace
- [[epks-login]] - Přihlašovací stránka
- [[epks-hp]] - Homepage
- [[cs.konfigurace-stojanu]] - Konfigurace kiosků

### Knihovny
- [[central-server.lib]] - Integrace s Central Serverem
- [[epks.lib]] - EPKS utility funkce
- [[parseUrl.lib]] - Parsování URL parametrů

### Boot a inicializace
- [[epks.boot]] - Boot soubor pro inicializaci serveru, databáze a Central Server připojení

## 📧 Email šablony

Systém obsahuje následující email šablony v adresáři `email-layouts/`:

- **dekujeme.email.md** - Poděkovací email po odeslání přihlášky
- **prihlaseni.email.md** - Přihlašovací email s údaji
- **udajekprihlaseni.email.md** - Email s údaji k přihlášení pro stravníka
- **zadostoopravu.email.md** - Email s žádostí o opravu údajů

## 🗄️ Databáze

### EPKS databáze
```
Host: devel.altisima.cz
Port: 10196
Database: epks-dev
Schema: public
```

### Aktualizace databáze
```
Host: devel.altisima.cz
Port: 10096
Database: aktserver-dev
Schema: public
```

Databázová připojení jsou inicializována v [[epks.boot]].

## 🔗 Integrace

### Central Server
EPKS je integrován s **Central Server** pro:
- Real-time Socket.IO komunikace
- Správu připojených klientů
- Centrální autentizaci
- Remote restart funkcionalitu

**Více informací:** [[central-server.lib]]

## 🛠️ Technická dokumentace

### ENT Framework
- [[ENT-AGENT-GUIDE.book]] - Kompletní průvodce tvorbou ENT objektů
- [[ent.index]] - ENT Framework základní koncepce
- [[vault-mapping.index]] - Struktura vault projektů

### Routing
- Veřejné stránky používají `publicRoute` prefix (např. `/prihlaska/*`)
- Administrační stránky používají `/pages/epks/*` prefix

### Layout
- [[Layout]] - Hlavní layout komponenta
- [[index.epks.html]] - HTML template

## 📝 Specifická dokumentace

- [[jak se generuje url na formulář.doc]] - Dokumentace k URL generování pro formuláře

## 🔄 Workflow a procesy

### Proces přihlášky stravníka
1. Rodič otevře veřejný formulář přes URL `/prihlaska/:canteen_slug/:slug_id`
2. Vyplní formulář s údaji dítěte
3. Formulář se odešle do databáze
4. Systém odešle potvrzovací email
5. Administrátor jídelny vidí přihlášku v administraci
6. Administrátor může přihlášku vytisknout nebo upravit

### Administrace přihlášek
1. Administrátor se přihlásí přes `/pages/epks/login`
2. V administraci vidí tabulku všech přihlášek pro svou jídelnu
3. Může zobrazit detail jednotlivé přihlášky
4. Může vytisknout formulář
5. Může upravit nastavení formuláře

### Centrální administrace (superadmin)
1. Superadmin má přístup do `/pages/epks/interni-administrace`
2. Vidí všechny jídelny a jejich přihlášky
3. Může spravovat formuláře napříč jídelnami
4. Může konfigurovat kiosky/stojany

## 📊 Verze a changelog

**Aktuální verze:** v2.0.1

**Poslední změny:**
- `f90e4dd4` - fix: path to libs (2025-09-09)
- Oprava cest k knihovnám ve všech komponentách
- Aktualizace administračních komponent

## 🚀 Development

### Struktura projektu
```
epks/
├── base/              # Základní komponenty
├── boot/              # Boot soubory
├── components/        # Globální komponenty
├── email-layouts/     # Email šablony
├── layout/            # Layout komponenty
├── lib/               # Knihovny
├── pages/             # Stránky
├── server/            # Server-side skripty
└── doc/               # Dokumentace (tento adresář)
```

### Git repozitář
- **Remote:** git@github.com:altisima/epks-module.git
- **Branch:** develop
- **Stav:** clean (bez uncommited změn)

### Environment
- **Local:** `ENT_ENV=local`
- **Production:** `ENT_ENV=production`

## 🔍 Hledání v projektu

### Užitečné příkazy
```bash
# Najdi všechny komponenty
fd -I "component\.md$"

# Najdi všechny stránky
fd -I "page\.md$"

# Najdi všechny knihovny
fd -I "lib\.md$"

# Najdi všechny email šablony
fd -I "email\.md$"

# Hledej v obsahu souborů
rg "searchTerm" --type md
```

## 📞 Kontakt a podpora

Pro otázky a podporu kontaktujte tým Altisima.

---

*Poslední aktualizace dokumentace: 2025-09-29*
*Dokumentaci udržuje: Brain Documentation Keeper*